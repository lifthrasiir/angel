First, reason in your scratchpad. Then, generate the <state_snapshot>.